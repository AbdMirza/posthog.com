---
title: Migrate from Amplitude to PostHog
sidebar: Docs
showTitle: true
---

import MigrationWarning from "./_snippets/migration-warning.mdx"

<MigrationWarning />

Migrating from Amplitude is a two step process:

1. Retrieve the API key and secret key from the project's organization settings.

2. Provide the API key and secret within your PostHog managed migrations tool.

## Retrieve API key and secret key

To export data using Amplitude's Export API, start by retrieving your API and secret key for your project from your organization settings.

![API keys](https://res.cloudinary.com/dmukukwp6/image/upload/keys_6055e723a5.png)

## Provide API key and secret key

Navigate to your PostHog project's [managed migrations settings](#) and provide the Amplitude API key and secret key.

![Amplitude Managed Migration](https://res.cloudinary.com/dmukukwp6/image/upload/amplitude_managed_migration_93d5d04e99.png)

### Converting Amplitude events

Although Amplitude events have a similar structure, managed migrations will automatically convert them to PostHog's schema. Many events and properties have different keys. For example, autocaptured events and properties in PostHog often start with `$`.

You can see Amplitude's event structure in their [Export API documentation](https://www.docs.developers.amplitude.com/analytics/apis/export-api/#response-schema) and PostHog's autocapture event structure in our [autocapture docs](/docs/product-analytics/autocapture#autocaptured-events). 

> **Why are my event and DAU count lower in PostHog than Amplitude?** PostHog blocks bot traffic by default, while Amplitude doesn't. You can see a full list of the bots PostHog blocks [in our docs](/docs/product-analytics/troubleshooting#does-posthog-block-bots-by-default).

### S3 export

If your data exceeds Amplitude's export size limitation, you can use [their S3 export](https://amplitude.com/docs/data/destination-catalog/amazon-s3).

### Aliasing device IDs to user IDs

In addition to capturing the events, we want to combine anonymous and identified users. For Amplitude, events rely on the device ID before identification and the user ID after:

| Event | User ID | Device ID |
|-------|---------|-----------|
| Application installed | null | 551dc114-7604-430c-a42f-cf81a3059d2b |
| Login | 123 | 551dc114-7604-430c-a42f-cf81a3059d2b |
| Purchase | 123 | 551dc114-7604-430c-a42f-cf81a3059d2b |

We want to attribute "Application installed" to the user with ID 123, so we need to also call [alias](/docs/product-analytics/identify#alias-assigning-multiple-distinct-ids-to-the-same-user) with both the device ID and user ID:

```python
posthog = Posthog(
    '<ph_project_api_key>', 
    host='<ph_client_api_host>',
    debug=True,
    historical_migration=True
)

posthog.alias(previous_id=device_id, distinct_id=user_id)
```

Since you only need to do this once per user, ideally you'd store a record (e.g. a SQL table) of which users you'd already sent to PostHog, so that you don't end up sending the same events multiple times.
